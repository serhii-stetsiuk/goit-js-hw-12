{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport async function getImagesByQuery(query, page) {\n\n\tconst getImage = await axios.get('https://pixabay.com/api/', {\n\t\tparams: {\n\t\t\tkey: '51732314-3454f0789e14ece522df46b66',\n\t\t\tq: query,\n\t\t\timage_type: 'photo',\n\t\t\torientation: 'horizontal',\n\t\t\tsafesearch: true,\n\t\t\tpage: page,\n\t\t\tper_page: '15',\n\t\t}\n\t});\n\treturn getImage.data;\n}\n\n","\nimport axios from \"axios\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst generalGallery = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nlet simpleLightbox = new SimpleLightbox('.js-gallery a', {\n\tcaptionDelay: 250,\n\toverlayOpacity: 0.95,\n});\n\nexport function createGallery(images) {\n\tconst markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n\t\treturn `\n        <a class=\"gallery-card js-gallery-card\" href=\"${largeImageURL}\"\n          ><div class=\"gallery-link\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n          </div>\n          <div class=\"gallery-text\">\n            <div class=\"likes\">\n              <p class=\"gallery-text-item\">Likes</p>\n              <p class=\"gallery-text-count\">${likes}</p>\n            </div>\n\n            <div class=\"likes\">\n              <p class=\"gallery-text-item\">Views</p>\n              <p class=\"gallery-text-count\">${views}</p>\n            </div>\n            <div class=\"likes\">\n              <p class=\"gallery-text-item\">Comments</p>\n              <p class=\"gallery-text-count\">${comments}</p>\n            </div>\n            <div class=\"likes\">\n              <p class=\"gallery-text-item\">Downloads</p>\n              <p class=\"gallery-text-count\">${downloads}</p>\n            </div>\n          </div>\n        </a>`;\n\t}).join('');\n\tgeneralGallery.insertAdjacentHTML('beforeend', markup);\n\tsimpleLightbox.refresh();\n}\n\nexport function showLoader(loader) {\n\t\tloader.classList.add('js-isActive');\t\n}\nexport function hideLoader(loader) {\n\tloader.classList.remove('js-isActive');\n}\n\n\nexport function clearGallery() {\n\tif (generalGallery) {\n\t\tgeneralGallery.innerHTML = '';\n\t} else { return; }\n}\n\nexport function showLoadMoreButton(){\n\tloadMoreBtn.classList.add('load-btn-active');\n}\nexport function hideLoadMoreButton(){\n\tloadMoreBtn.classList.remove('load-btn-active');\n}\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery, showLoader, clearGallery, hideLoader, showLoadMoreButton, hideLoadMoreButton }  from './js/render-functions';\n\nconst allForm = document.querySelector('.js-form');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nconst formLoader = document.querySelector('.js-loader');\nconst btnLoader = document.querySelector('.js-loader-load-more');\n\nlet currentPage;\nlet maxPages = 0;\nlet textInput;\nconst pageSize = 15;\nlet getImagesOnPage;\n\nallForm.addEventListener('submit', async (e) => {\n\te.preventDefault();\n\thideLoadMoreButton();\n\tcurrentPage = 1;\t\n\t\t\ntextInput = e.target.elements.search_text.value;\n\tif (!textInput.trim()) {\n\t\t iziToast.error({\n\t\t\tposition: 'topRight',\n\t\t\tmessage: 'Sorry, there are no images matching your search query. Please try again!',\n\t\t }); return; \n\t};\n\t\tclearGallery();\n\t   showLoader(formLoader);\n\n\ttry {\n\t\tgetImagesOnPage = await getImagesByQuery(textInput.trim(), currentPage);\n\t\t\n\t\tif (!getImagesOnPage.hits.length) {\n\t\t\tiziToast.error({\n\t\t\t\tposition: 'topRight',\n\t\t\t\tmessage: 'Sorry, there are no images matching your search query. Please try again!',\n\t\t\t});\n\t\t} else { createGallery(getImagesOnPage.hits) }\n\t\tmaxPages = Math.ceil(getImagesOnPage.totalHits / pageSize) ;\n\t}\n\tcatch (error) {\n\t\tconsole.log(error);\n\t\t\n\t\tiziToast.error({\n\t\t\tposition: 'topRight',\n\t\t\tmessage: error,\n\t\t});\n\t}\n\tcheckLoadBtnStatus();\n\thideLoader(formLoader);\n\t\te.target.reset();\n})\n\t\nloadMoreBtn.addEventListener('click', async () => {\n\tshowLoader(btnLoader);\n\tcurrentPage += 1;\n\tcheckLoadBtnStatus();\n\t\n\n\ttry {\n\t\tgetImagesOnPage = await getImagesByQuery(textInput.trim(), currentPage);\n\t\tcreateGallery(getImagesOnPage.hits);\n\t}\n\tcatch {iziToast.error({ message: 'ERROR' });}\n\thideLoader(btnLoader);\n\n\n\n  const cardGallery = document.querySelector('.js-gallery-card');\n\tif (!cardGallery) return;\n  const rect = cardGallery.getBoundingClientRect();\n  const cardHeight = rect.height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n})\n\nfunction checkLoadBtnStatus() {\n\tif (currentPage === maxPages) {\n\tiziToast.info({\n\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\tposition: 'bottomRight',\n\t});\n\t}\n\tif (currentPage < maxPages) {\n\t\tshowLoadMoreButton();\n\t} else {\n\t\thideLoadMoreButton();\n\t};\n}\n\n\n"],"names":["getImagesByQuery","query","page","axios","generalGallery","loadMoreBtn","simpleLightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","loader","hideLoader","clearGallery","showLoadMoreButton","hideLoadMoreButton","allForm","formLoader","btnLoader","currentPage","maxPages","textInput","pageSize","getImagesOnPage","e","iziToast","error","checkLoadBtnStatus","cardGallery","cardHeight"],"mappings":"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"}